[ { "title": "Jekyll and Pi - Setting up Jekyll on a Raspberry Pi 4", "url": "/posts/jekyll-and-pi-setting-up-jekyll/", "categories": "DevOps", "tags": "jekyll, tutorial", "date": "2022-03-15 08:47:00 +0000", "snippet": "What?We are going to deploy a website with the help of Jekyll and a RaspberryPi 4 and use this as development environment. I will use the Pi as a server to host the website on my personal domain (you are probably visiting right now) and then we will setup a CD Pipeline to avoid manually deploying changes to our site every time we make them. This started as an attempt to deploy a Jekyll website on RaspberryPi in production. However, while deploying this to production I quickly realized it’s way more comfortable to use GitHub Pages for hosting. I changed my approach and am now using my RasPi for development and testing only. Please consider this when you’re reading this article. The follow-up article will explain how to handle a production environment with GitHub pages if you have a domain at hand (which was a premise anyway).So, what exactly is Jekyll?From their official website: Jekyll is a static site generator. It takes text written in your favorite markup language and uses layouts to create a static website. You can tweak the site’s look and feel, URLs, the data displayed on the page, and more. One of the great things about Jekyll is there’s no database. All content and site structure are files that a Git repository can version. Using a repository is optional but is recommended.It is also the foundation for GitHub Pages. So why not just use GitHub Pages then, you may ask? Because I am too much of a Scrooge McDuck.No, seriously. Why?Simply because I do have a domain available and a couple of other reasons why I would like to share my journey, for example: Documentation Learning Interactions Motivation Input I am a loner with no hobbies (jk, I love my girlfriend and her patience with me while I am sitting in front of my desk doing pointless stuff like this all day long)Our setupI will try to use my Raspi 4 with 4 Gigs of RAM for this because I do have it idling around for months now and this way it will finally have a purpose. This Pi already has the Oh My Zsh Shell with theme and plugins installed and configured (I will probably write some documentation for my shell setup here at some point). Let’s see how it goes.Alright, let’s goInstalling prerequisites Ruby version 2.5.0 or higher RubyGems GCC and Make It is possible to run jekyll with docker and there are official images available on Docker Hub. However, there are no arm images available at the time of this post so I am going to do this the oldschool way.Nothing unusual happening here. First off we install ruby and some other prerequisites:sudo apt-get -y install ruby-full build-essential zlib1g-devThis spawned a popup asking me which services I want to restart. I kept the suggested services checked and confirmed hitting enter.Next, we want to avoid installing RubyGems packages (called gems) as the root user. Instead, we set up a gem installation directory for our user account. The following commands will add environment variables to our ~/.zhrc file to configure the gem installation path:echo &#39;# Install Ruby Gems to ~/gems&#39; &amp;gt;&amp;gt; ~/.zshrcecho &#39;export GEM_HOME=&quot;$HOME/gems&quot;&#39; &amp;gt;&amp;gt; ~/.zshrcecho &#39;export PATH=&quot;$HOME/gems/bin:$PATH&quot;&#39; &amp;gt;&amp;gt; ~/.zshrcsource ~/.zshrc In my case I had to move the export commands further to the top of my .zshrc because other configurations inthe file would conflict and result in errors such as:zsh: command not found: bundle (after gem install bundle)Finally, we install Jekyll and Bundler:gem install jekyll bundlerThis can take a while depending on your setup. The Pi I had lying around for months had to get used to his new life and took around 10 minutes to complete its job.Creating a new siteFirst off, we tell jekyll to create our new site at ~/blog (no, you don’t have to create the folder first):jekyll new ~/blogI will call this our root folder from now on.Next, we change into our new directory, build the site and make it available on our Pi server:cd ~/blog &amp;amp;&amp;amp; bundle exec jekyll serve Ruby Version 3.0.0+: As of 03/14/2022 the official documentation says this step may fail. You may fix it by adding webrick to your dependencies: bundle add webrickThis brings up our server and allows us to connect to 127.0.0.1:4000. Though because I was installing this on my Pi and wanted to connect from my desktop I had to add a few lines to the _config.yml in my ~/blog folder:# deploymenthost: 0.0.0.0port: 5000Et voilà! Our site is up and running:Alright, cool. So far we installed Jekyll and created our first site. It’s just the default template with a default post for now, but that will change soon.Content and customizationCreating our first postOkay, we got the template site up and running, now it’s time to fill it with our own content. This is pretty simple.Jekyll looks for files with the proper format in the ~/blog/_posts folder. This file must contain what Jekyll calls the YAML Front Matter.A typical Front Matter section could look like this:---layout: posttitle: &quot;Jekyll and Pi&quot;date: 2022-03-15 08:47excerpt: &quot;In this article, we will setup a static Jekyll site on a RaspberryPi 4 and create a simple CD pipeline for it.&quot;category: DevOpstags: jekyll tutorial---## What?We are going to deploy a website with the help of [Jekyll](https://jekyllrb.com/) and a RaspberryPi 4. Afterwards we are going to setup a CD Pipeline to avoid manually deploying changes to our site every time we make them. So, what exactly is Jekyll?From their official website: &amp;gt; Jekyll is a static site generator. It takes text written in your favorite markup language and uses layouts to create a static website. You can tweak the site’s look and feel, URLs, the data displayed on the page, and more.&amp;gt; One of the great things about Jekyll is there’s no database. All content and site structure are files that a Git repository can version. Using a repository is optional but is recommended.It is also the foundation for [GitHub Pages](https://pages.github.com/). So why not just use GitHub Pages then, you may ask? Because I am too much of a Scrooge McDuck.And the result looks like this:Okay I admit it’s not the prettiest website out there but at least we managed to fill our site with content. But I am a design whore and I NEED IT TO LOOK PRETTY. So let’s do that now.Styling our site with a themeThere are thousands of themes for Jekyll out there and many sites that can give you an overview and help you find the right one for you, such as: https://github.com/topics/jekyll-theme https://jekyllthemes.io/ https://jekyll-themes.comI wanted a more minimalistic approach for this site and after some research I found the chirpy theme to be a fitting candidate. It looks nice, has a sidebar, is responsive, features a dark mode (FYI: not having a dark mode is the eigth cardinal sin) and it is free.First we setup a github repository with the help of Chirpy Starter. Then we clone it next to our already created blog directory:git clone git@github.com:&amp;lt;username&amp;gt;/&amp;lt;repository-name&amp;gt;.gitThen we make the same changes to the _config.yml we already made in our blog directory (adding the host and port) and customize some of the other predefined configurations such as the blogs name and description. Next thing we do is moving the already created posts and screenshots to our new repository:mv ~/blog/_posts/* ~/&amp;lt;repository-name&amp;gt;/_posts &amp;amp;&amp;amp; mv ~/blog/assets/* ~/&amp;lt;repository-name&amp;gt;/assetsAll that’s left to enjoy our beautiful new theme is another run of bundle exec jekyll serve --watch We are using --watch here to get a live view of all the changes we make to our websiteSo far so good. We now have our website up and running and some content wrapped up in a nice theme. What’s next?In the next part we will setup our Pi to host the site and make it available to the internet.resources: https://jekyllrb.com/docs https://opensource.com/article/21/9/build-website-jekyll https://chirpy.cotes.page/" } ]
